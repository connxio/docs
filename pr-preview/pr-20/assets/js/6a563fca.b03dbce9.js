"use strict";(self.webpackChunkconnxio_docs=self.webpackChunkconnxio_docs||[]).push([[6909],{1062:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>h,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var t=s(5893),i=s(1151),o=s(9965),r=s(4996);const a={},l="Email",c={id:"integrations/adapters/inbound/email",title:"Email",description:"Connxio lets customers provide messages to the Connxio pipeline by configuring connections to email accounts. We currently support POP3 and IMAP protocols. This page details limitations of email protocols and how to configure and connect to an email account.",source:"@site/../docs/integrations/adapters/inbound/email.md",sourceDirName:"integrations/adapters/inbound",slug:"/integrations/adapters/inbound/email",permalink:"/docs/integrations/adapters/inbound/email",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"connxioSidebar",previous:{title:"Azure Storage",permalink:"/docs/integrations/adapters/inbound/azure-storage"},next:{title:"Event Grid",permalink:"/docs/integrations/adapters/inbound/event-grid"}},h={},d=[{value:"Configuring the Email adapter",id:"configuring-the-email-adapter",level:2},{value:"Leasing",id:"leasing",level:2},{value:"Retry",id:"retry",level:2}];function u(e){const n={a:"a",em:"em",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.a)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"email",children:"Email"}),"\n",(0,t.jsx)(n.p,{children:"Connxio lets customers provide messages to the Connxio pipeline by configuring connections to email accounts. We currently support POP3 and IMAP protocols. This page details limitations of email protocols and how to configure and connect to an email account."}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Limitations"}),(0,t.jsx)("p",{children:(0,t.jsx)(n.p,{children:"There are several limitations inherent to the POP3 and IMAP protocols, subsequently we do not recommend sending large volumes through email. Of the two protocols, we recommend using IMAP since this is the newer, more secure and faster choice. Be aware that we do not currently support searching or excluding emails from the pickup, as such all messages arriving in on the email server will be processed according to the configuration."})})]}),"\n",(0,t.jsx)(n.h2,{id:"configuring-the-email-adapter",children:"Configuring the Email adapter"}),"\n",(0,t.jsx)(n.p,{children:'To configure Connxio to start processing your email messages select the Email option in "Inbound Connection" shape:'}),"\n","\n","\n",(0,t.jsx)("div",{style:{maxWidth:"400px"},children:(0,t.jsx)(o.Z,{alt:"Configuring inbound connection",sources:{light:(0,r.Z)("/img/docs/inbound-connection-light.webp"),dark:(0,r.Z)("/img/docs/inbound-connection-dark.webp#dark-only")}})}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.p,{children:"The following properties are used to configure the adapter:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Username"}),": The email username."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Password"}),": The email account password."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Host"}),": The server that hosts the email account."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Host Type"}),": The type of protocol used on the server."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Port"}),": The port for connecting to the server. IMAP typically uses port 993 over SSL."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Send Attachments"}),": When turned on attachments are treated as separate messages, ie. if a message is delivered to the server with two attachments Connxio will process each attachment as a separate message."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Send Message Body"}),": When turned on Connxio will process the message body as a single message through the pipeline."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Delete Messages"}),": POP3 will always delete messages as the protocol does not support changing the ",(0,t.jsx)(n.em,{children:"read"})," property. IMAP will mark messages asa read by default. Turn this property on to make IMAP delete messages."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use SSL"}),": Most hosts require SSL. Turn this on to make Connxio contact the host with SSL enabled."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"leasing",children:"Leasing"}),"\n",(0,t.jsxs)(n.p,{children:["The Email inbound adapter uses leasing to ensure that only one process is picking from the server at any one time. This prevents deadlocks and race conditions towards files on the Email area. By default the leasing is set to the ",(0,t.jsx)(n.em,{children:"polling interval"}),", which means that the thread processing the Email files is the sole worker for the same duration as the interval between polling. This is usually very effective as you ensure that only one process contacts the resource for every time you poll against it."]}),"\n",(0,t.jsxs)(n.p,{children:["If you have a server with a lot of messages arriving continually however, this can cause problems. This is because you probably want the process from Connxio to poll every minute to pick up files as fast as possible, but since new files are arriving constantly you cant guarantee that the process will finish before the minute mark which causes a new process to be created after the leasing has run out. This in turn causes multiple processes from Connxio to process the same files at the same time. This doesn't cause duplicates but ",(0,t.jsx)(n.em,{children:"can"})," cause race condition where already picked files are processed by both threads at the same time."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://cmhpictsa.blob.core.windows.net/pictures/Sftp%20inbound%20process%20lock.png?sv=2021-04-10&st=2022-12-01T07%3A54%3A23Z&se=2040-12-02T07%3A54%3A00Z&sr=b&sp=r&sig=YBfEB8vwE2PXr1tA0T%2BoE7sA8Z6swBtKJjVeLfL7PAE%3D",alt:"img"})}),"\n",(0,t.jsxs)(n.p,{children:["To solve this problem we have added the ",(0,t.jsx)(n.em,{children:"Use Process Lock"})," option which lets you lock the process for the time the process takes to complete. This can cause the ",(0,t.jsx)(n.em,{children:"polling interval"})," to become erratic as a new process is not allowed to start before the first one finishes. This will prevent race conditions when long running processes on constantly filling servers are causing problems. It's up to you as customers to enable this when needed as it depends on the server and load."]}),"\n",(0,t.jsx)(n.h2,{id:"retry",children:"Retry"}),"\n",(0,t.jsxs)(n.p,{children:["Since Connxio reaches out and picks up files when using the Email inbound adapter, retry is handled by the Connxio framework. If a fault happens when the polling interval hits, the integration will be marked for execution at the next interval, which is after 60 seconds. This means that even if you have the polling interval set to trigger hourly or event daily, Connxio will try to execute the configuration every minute util it succeeds. This does not happen if the message is already picked up however since Connxio cant be sure the message is possible to requeue on the external message. The message will then be sent to catastrophic retry as described in the ",(0,t.jsx)(n.a,{href:"/integrations/retry",children:"Retry Page"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>r});var t=s(7294);const i={},o=t.createContext(i);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);