"use strict";(self.webpackChunkconnxio_docs=self.webpackChunkconnxio_docs||[]).push([[9116],{8284:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var s=t(5893),i=t(1151);const a={},o="ACK",r={id:"integrations/adapters/outbound/acknowledgment",title:"ACK",description:"Connxio provides users with the option to receive acknowledgement (ACK) events when a message has been delivered to the receiving system. The concept of sending ACK messages is inspired by the TCP protocol and gives our customers the ability to verify that a message has been delivered successfully in close to real time. When enabled, this feature supplies an external system with an event with contents supplied by using the standard Connxio code mapping functionality, which makes the ACK message extremely powerful as it can contain almost anything, even the delivered message itself. This page describes how to enable this functionality and common use cases.",source:"@site/../docs/integrations/adapters/outbound/acknowledgment.md",sourceDirName:"integrations/adapters/outbound",slug:"/integrations/adapters/outbound/acknowledgment",permalink:"/docs/integrations/adapters/outbound/acknowledgment",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"connxioSidebar",previous:{title:"FTP and SFTP",permalink:"/docs/integrations/adapters/inbound/sftp"},next:{title:"Azure Storage",permalink:"/docs/integrations/adapters/outbound/azure-storage"}},c={},l=[{value:"Use cases",id:"use-cases",level:2},{value:"Ensuring delivery",id:"ensuring-delivery",level:3},{value:"Reacting to delivery",id:"reacting-to-delivery",level:3},{value:"Keeping track of delivery",id:"keeping-track-of-delivery",level:3},{value:"Configuring Acknowledgments",id:"configuring-acknowledgments",level:2},{value:"Creating Ack code components",id:"creating-ack-code-components",level:2},{value:"Retry",id:"retry",level:2}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"ack",children:"ACK"}),"\n",(0,s.jsxs)(n.p,{children:["Connxio provides users with the option to receive acknowledgement (ACK) events when a message has been delivered to the receiving system. The concept of sending ACK messages is inspired by the ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_establishment",children:"TCP"})," protocol and gives our customers the ability to verify that a message has been delivered successfully in close to real time. When enabled, this feature supplies an external system with an event with contents supplied by using the standard Connxio ",(0,s.jsx)(n.a,{href:"/integrations/transformation/code-components",children:"code mapping functionality"}),", which makes the ACK message extremely powerful as it can contain almost anything, even the delivered message itself. This page describes how to enable this functionality and common use cases."]}),"\n",(0,s.jsx)(n.admonition,{title:"Note",type:"caution",children:(0,s.jsxs)(n.p,{children:["Be aware that enabling ACK messages ",(0,s.jsx)(n.strong,{children:"multiplies traffic by two"}),". All messages generated by ACK events will count toward your subscription usage."]})}),"\n",(0,s.jsx)(n.h2,{id:"use-cases",children:"Use cases"}),"\n",(0,s.jsx)(n.p,{children:"Ack messages can be used in a variety of scenarios. The most common ones are ensuring delivery, reacting to delivery or keeping track of delivery."}),"\n",(0,s.jsx)(n.h3,{id:"ensuring-delivery",children:"Ensuring delivery"}),"\n",(0,s.jsx)(n.p,{children:"Using ACK's you can ensure delivery in the source system by reacting to negative ACK messages and resending messages automatically when failures happen. You can also change the delivery status in the source system for later manual processing."}),"\n",(0,s.jsx)(n.h3,{id:"reacting-to-delivery",children:"Reacting to delivery"}),"\n",(0,s.jsx)(n.p,{children:"Reacting to delivery entails performing en action when something is delivered, this could include starting a new Connxio flow or a separate internal integration pipeline or process. Take en example where a customer is migrated to a new system, and access rights have to be sent after the user is stored in the receiver system. An ACK could be sent to update the originating system with the user created status and an automatic process could start the user access update."}),"\n",(0,s.jsxs)(n.p,{children:["Reactions could also include alert from internal systems or logging providers like Slack, Teams or Archeo. This can also be handled by ",(0,s.jsx)(n.a,{href:"/integrations/logging",children:"logging events"})," but ACK messages can represent another pipeline and since the message is ensured delivered it represents an unique opportunity to react to the delivery itself without any extra rules or customization."]}),"\n",(0,s.jsx)(n.h3,{id:"keeping-track-of-delivery",children:"Keeping track of delivery"}),"\n",(0,s.jsxs)(n.p,{children:["Especially for RESTful Api's keeping track of what has been retrieved can be a hassle. Consider the following scenario: you fetch resources from an Api endpoint that hosts changes to data every 5 minutes and put these changes in an external Api. The polling interval triggers and the data is transferred successfully. 5 minutes passes and the interval triggers again, how do you only migrate the new changes? Well, a simple solution would be to have a separate endpoint that receives events describing what data has been transferred. USing ACK messages you map to the correct format and tell the originating Api that the data has been transferred and that the change can be removed from the fetch endpoint. This scenario has its pitfalls and can cause duplicates if the interval is too long or something fails, but these pitfalls are manageable and will enable you to fetch changes from said receiving endpoint successfully.",(0,s.jsx)(n.br,{}),"\n","This is just one of the many uses for tracking delivery, but this example illustrates the potential benefits of using ACK message sin this way."]}),"\n",(0,s.jsx)(n.h2,{id:"configuring-acknowledgments",children:"Configuring Acknowledgments"}),"\n",(0,s.jsx)(n.p,{children:'Ack delivery can be configured on all outbound adapters in Connxio. You can use any outbound adapter to deliver the ACK as well. So say you want to deliver the message data itself through Sftp, you can still deliver the ACK through Service Bus or REST to another part of the system or another system entirely. To start sending ACK messages enable the "Send Acknowledgment" switch in the outbound adapter window:'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cmhpictsa.blob.core.windows.net/pictures/Ack%20enable%20on%20adapter.png?sv=2020-08-04&st=2021-11-16T11%3A14%3A39Z&se=2040-11-17T11%3A14%3A00Z&sr=b&sp=r&sig=nxGH1A8rQw7uw1XSoda0nusLAJEh1UW4752GPHGy4GQ%3D",alt:"img"})}),"\n",(0,s.jsx)(n.p,{children:'When you enable the "Send Acknowledgment" switch a menu pops up, if you need to enter this menu at a later time use the "Edit Ack options" button depicted above. Configure the Ack options window like so to start sending ACK messages:'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cmhpictsa.blob.core.windows.net/pictures/Ack%20Options%20config.png?sv=2020-08-04&st=2022-01-11T12%3A32%3A18Z&se=2040-01-12T12%3A32%3A00Z&sr=b&sp=r&sig=nixBhAC%2BcjSGQl6ql1L6Z0DlaO%2FX0LaHDYZzl%2BwS%2Bj4%3D",alt:"img"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Code Acknowledgement Map (Code Component)"}),": The ",(0,s.jsx)(n.em,{children:"Code Component"})," is selected as described in the ",(0,s.jsx)(n.a,{href:"/integrations/transformation/code-components",children:"Code Components"})," section."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Outbound file format"}),": Only applicable if the adapter delivers a file and denotes the file format and ending of the file."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Adapter Type"}),": The type of adapter to use to deliver the ACK message. All adapter configuration is explained under the ",(0,s.jsx)(n.code,{children:"Adapters"})," header."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"When acc is enabled for an adapter the adapter will display an icon like this in the master view:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://cmhpictsa.blob.core.windows.net/pictures/Ack%20icon%20image.png?sv=2020-08-04&st=2021-11-16T11%3A33%3A15Z&se=2040-11-17T11%3A33%3A00Z&sr=b&sp=r&sig=wre4L15vsKCLNXyHC1xrnH6GMe80RCUNvF4AFeROJsk%3D",alt:"img"})}),"\n",(0,s.jsx)(n.h2,{id:"creating-ack-code-components",children:"Creating Ack code components"}),"\n",(0,s.jsxs)(n.p,{children:["Creating an Ack code component is done in more or less the same way as ",(0,s.jsx)(n.a,{href:"/integrations/transformation/code-components",children:"map code components"}),". The only differences are that an Ack code componenet requires the 'IConnXioAck' interface and that is takes 'bool success' as a parameter."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'    public class Mapper : IConnXioAck\n    {\n        public TransformationContext Map(TransformationContext transformationContext, bool success)\n        {\n            //Add error handling as necessary, this will give better error messages in the logs\n            if (transformationContext.Content == null)\n                throw new ArgumentException("Message field is null");\n\n            //You can use newtonsoft and other basic nuget packages. Contact the Connxio team if you need a non supported package.\n            dynamic obj = JsonConvert.DeserializeObject(transformationContext.Content);\n\n            //Creating an instance of the ACK message to send\n            CustomAck ACK = new CustomAck\n            {\n                Id = obj.Id,\n                SuccessfulDelivery = success\n            };\n\n            //Replace content in the original TransformationContext with the new ACK content\n            transformationContext.Content = JsonConvert.SerializeObject(ACK);\n\n            //Return string representation of the ACK\n            return transformationContext;\n        }\n    }    \n\n    public class CustomAck\n    {\n        public string Id { get; set; }\n        public bool SuccessfulDelivery { get; set; }\n    }\n'})}),"\n",(0,s.jsx)(n.h2,{id:"retry",children:"Retry"}),"\n",(0,s.jsxs)(n.p,{children:["Acknowledgments use the same retry mechanism as the corresponding outbound adapter. Ie. if the ACK is sent by Sftp then the retry mechanisms for Sftp is used. These mechanisms are detailed per adapter under the ",(0,s.jsx)(n.code,{children:"Adapter -> Outbound"})," heading."]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>o});var s=t(7294);const i={},a=s.createContext(i);function o(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);